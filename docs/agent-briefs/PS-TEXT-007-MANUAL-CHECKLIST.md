# PS-TEXT-007: Manual Verification Checklist

## Overview
PS-TEXT-004〜006 で導入したテキスト機能の手動検証チェックリスト。
自動テスト21件と併せて品質ゲートを構成する。

## Prerequisites
- 最新の `main` ブランチをビルド・起動済み
- `pnpm test` が全件 PASS であることを確認済み

---

## Scenario 1: New text creation (単クリック新規作成)

| # | Step | Expected | PASS/FAIL |
|---|------|----------|-----------|
| 1-1 | テキストツールを選択 | ツールバーでテキストツールがアクティブ | |
| 1-2 | キャンバスの空白部分をクリック | テキストレイヤーが作成され、インラインエディタが表示される | |
| 1-3 | 「Hello World」と入力 | 入力テキストがリアルタイムで表示される | |
| 1-4 | キャンバスの別の場所をクリックして確定 | テキストが確定され、レイヤーパネルに表示される | |
| 1-5 | 確定後のテキストがキャンバスに表示されている | fillText によるレンダリングが可視 | |

## Scenario 2: Existing text edit (既存テキスト編集)

| # | Step | Expected | PASS/FAIL |
|---|------|----------|-----------|
| 2-1 | Scenario 1 で作成したテキストレイヤーをクリック | インラインエディタが表示される（新規レイヤーは作成されない） | |
| 2-2 | テキストを「Hello Japan」に変更 | テキストが更新される | |
| 2-3 | 確定後にレイヤー数が増えていない | レイヤーパネルで確認 | |

## Scenario 3: Japanese IME input (日本語IME入力)

| # | Step | Expected | PASS/FAIL |
|---|------|----------|-----------|
| 3-1 | テキストツールでキャンバスをクリック | 新規テキストレイヤー作成 | |
| 3-2 | IME で「にほんご」と入力 → 変換 → 「日本語」で確定 | 変換候補が表示され、確定テキストが保持される | |
| 3-3 | 続けて半角で「Test123」を入力 | 「日本語Test123」が完全に保持される | |
| 3-4 | テキストを確定 | 全文字が正しくレンダリングされる | |

## Scenario 4: Text transform/resize (テキスト変形)

| # | Step | Expected | PASS/FAIL |
|---|------|----------|-----------|
| 4-1 | テキストレイヤーを選択ツールで選択 | バウンディングボックスが表示される | |
| 4-2 | 右下のハンドルをドラッグして拡大 | textBounds と fontSize が比例して拡大される | |
| 4-3 | フォントサイズがプロパティパネルで更新される | 新しいサイズが表示される | |
| 4-4 | テキスト内容が変形後も可視 | fillText でレンダリングされている | |

## Scenario 5: Undo/Redo (履歴操作)

| # | Step | Expected | PASS/FAIL |
|---|------|----------|-----------|
| 5-1 | テキスト作成 → テキスト編集 → サイズ変更 の3操作を実行 | 各操作が履歴に記録される | |
| 5-2 | Ctrl+Z を3回実行 | 全操作が逆順に元に戻る（テキストレイヤーが削除される） | |
| 5-3 | Ctrl+Shift+Z を3回実行 | 全操作が順に復元される（テキスト・サイズが復元） | |
| 5-4 | 復元後のテキスト内容が正しい | 編集後のテキストが表示される | |

## Scenario 6: Side-effect regression (副作用確認)

| # | Step | Expected | PASS/FAIL |
|---|------|----------|-----------|
| 6-1 | ブラシツールでサイズ=42、不透明度=70%に設定 | 設定値がツールバーに表示される | |
| 6-2 | テキストツールに切り替えてテキスト作成・確定 | テキストが正常に作成される | |
| 6-3 | ブラシツールに戻る | サイズ=42、不透明度=70%が保持されている | |
| 6-4 | Space+ドラッグでパン操作 | キャンバスがパンされる（テキスト状態に影響なし） | |
| 6-5 | 選択範囲を作成後、テキスト操作を行う | 選択範囲が保持されている | |
| 6-6 | ラスターレイヤーの変形操作 | ラスターレイヤーの imageData/bounds に影響なし | |

---

## Result Summary

| Scenario | Result | Verifier | Date | Commit |
|----------|--------|----------|------|--------|
| 1. New text creation | | | | |
| 2. Existing text edit | | | | |
| 3. Japanese IME input | | | | |
| 4. Text transform/resize | | | | |
| 5. Undo/Redo | | | | |
| 6. Side-effect regression | | | | |

## Notes
- 全シナリオが PASS の場合、PS-TEXT-007 品質ゲートをクリアとする
- FAIL がある場合、対応する自動テストの追加を検討する
