# EXPORT-001: エクスポート品質検証

## 目的
PNG/JPGエクスポートで全レイヤーエフェクトが正確に出力されることを検証し、
YouTubeサムネイル標準サイズ（1280x720）での出力品質を保証する。

## 対象パッケージ
- `packages/app`（テストファイルの追加のみ — プロダクションコード変更なし）

## 推奨ブランチ
- `feat/export-001-quality-tests`

## 現状
- `app-010-image-export.test.ts` に基本エクスポートテストあり
- **エフェクト付きエクスポート品質の検証は未整備**

## 編集可能ファイル
- `packages/app/src/renderer/export-quality.test.ts` — **新規作成**
- `packages/app/src/renderer/fixtures/` — **新規作成**（テスト用期待値）

## 編集禁止ファイル
- `packages/app/src/renderer/store.ts`
- `packages/render/` 配下全て
- `packages/core/` 配下全て

## 実装要件（Must）
1. **PNG エクスポートテスト**
   - テキストレイヤー + stroke + drop-shadow → PNG出力 → 画像が正しいサイズ
   - 透過PNG: アルファチャンネルが保持されること
   - エフェクト付きレイヤーがフラットに合成されること（エフェクトが出力に含まれる）

2. **JPG エクスポートテスト**
   - 品質パラメータ（0.8, 0.95 等）が出力ファイルサイズに影響すること
   - JPEG圧縮でアルファが白背景に合成されること

3. **サムネイルサイズテスト**
   - 1280x720 キャンバスでの出力
   - 出力画像が正確に 1280x720 ピクセルであること
   - 全レイヤー（text + raster + group）がフラットに合成されること

4. **エッジケース**
   - 空ドキュメント（レイヤーなし）のエクスポート
   - 非表示レイヤーがエクスポートに含まれないこと
   - 0%不透明度レイヤーの扱い

## 実装要件（Should）
1. エクスポート結果を画像ファイルとして保存する仕組み（目視確認用）
2. ファイルサイズの妥当性チェック（1280x720 PNGが数MB以内等）

## 受け入れ基準
1. PNG/JPG両形式でエフェクト付きエクスポートが成功する
2. 1280x720 での出力テストが通る
3. 透過・非表示・不透明度のエッジケースが通る
4. 既存の `app-010-image-export.test.ts` に回帰がない

## 必須テスト
- 上記の全テストケース

## 実行コマンド
- `pnpm --filter @photoshop-app/app test`
- `pnpm lint`
