# BG-001: パターンオーバーレイ・背景拡充

## 目的
サムネイル背景で多用されるパターンオーバーレイ（ドット・ストライプ等）を実装し、
背景プリセットを拡充する。

## 対象パッケージ
- `packages/app`

## 推奨ブランチ
- `feat/bg-001-pattern-overlay`

## 現状
- `BackgroundDialog.tsx`: 背景設定ダイアログ — 存在
- `background-presets.ts`: 背景プリセット — 存在（基本的なプリセットあり）
- `PatternDialog.tsx`: パターンダイアログ — 存在するが機能は限定的
- **ドット・ストライプ・市松模様等のプロシージャルパターンは未実装**

## 編集可能ファイル
- `packages/app/src/renderer/components/dialogs/PatternDialog.tsx` — パターン生成UI拡充
- `packages/app/src/renderer/components/dialogs/background-presets.ts` — プリセット追加
- `packages/app/src/renderer/components/dialogs/BackgroundDialog.tsx` — パターンタブ追加
- `packages/app/src/renderer/components/dialogs/pattern-generator.ts` — **新規作成**

## 編集禁止ファイル
- `packages/app/src/renderer/store.ts`
- `packages/app/src/renderer/template-store.ts`（TMPL-001の担当）
- `packages/app/src/renderer/components/dialogs/GradientMaskDialog.tsx`（GMASK-001の担当）
- `packages/render/` 配下全て
- `packages/core/` 配下全て

## 実装要件（Must）
1. **プロシージャルパターン生成**（`pattern-generator.ts`）
   - ドットパターン（サイズ・間隔・色）
   - ストライプパターン（方向・幅・色・間隔）
   - チェッカーボード（サイズ・色2色）
   - 斜線ハッチング（角度・幅・色）
   - 各パターンは `ImageData` or `CanvasPattern` として生成

2. **パターンオーバーレイUI**
   - パターン種別選択
   - 各パターンのパラメータ調整（スライダー）
   - プレビュー表示
   - 不透明度・ブレンドモード設定

3. **背景プリセットの拡充**
   - 既存のグラデーション系プリセットに加え、パターン系プリセットを追加
   - 「ダークドット」「レトロストライプ」「テック風グリッド」等

## 実装要件（Should）
1. パターンの角度回転
2. パターンのカスタムカラーパレット

## 受け入れ基準
1. 4種以上のプロシージャルパターンが生成できる
2. パターンパラメータの変更がプレビューに反映される
3. パターンを背景に適用できる
4. 既存の背景機能に回帰がない

## 必須テスト
- 各パターン生成のユニットテスト
- パラメータ変更テスト
- プリセット適用テスト

## 実行コマンド
- `pnpm --filter @photoshop-app/app test`
- `pnpm lint`
